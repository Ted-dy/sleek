package me.kansio.client.modules.impl.exploit.disabler.matrx;

import me.kansio.client.event.impl.PacketEvent;
import me.kansio.client.modules.impl.exploit.disabler.DisablerMode;
import me.kansio.client.utils.network.PacketUtil;
import net.minecraft.init.Blocks;
import net.minecraft.item.ItemStack;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.client.C08PacketPlayerBlockPlacement;

public class Matrix extends DisablerMode {

    public Matrix() {
        super("Matrix");
    }

    @Override
    public void onPacket(PacketEvent event) {
        if (event.getPacket() instanceof C03PacketPlayer) {
            C03PacketPlayer packetPlayer = event.getPacket();
            double x = mc.thePlayer.posX,
                    y = mc.thePlayer.posY,
                    z = mc.thePlayer.posZ;
            float yaw = mc.thePlayer.rotationYaw,
                    pitch = mc.thePlayer.rotationPitch;

            if (packetPlayer.isMoving()) {
                x = packetPlayer.getPositionX();
                y = packetPlayer.getPositionY();
                z = packetPlayer.getPositionZ();
            }
            if (packetPlayer.getRotating()) {
                yaw = packetPlayer.getYaw();
                pitch = packetPlayer.getPitch();
            }

            PacketUtil.sendPacketNoEvent(new C08PacketPlayerBlockPlacement(mc.thePlayer.getPosition().down(256), 256, null, 0, 0, 0));

            event.setPacket(new C03PacketPlayer.C06PacketPlayerPosLook(x, y, z, yaw, pitch, packetPlayer.isOnGround()));
            PacketUtil.sendPacketNoEvent(new C03PacketPlayer.C06PacketPlayerPosLook(x, y, z, yaw, pitch, packetPlayer.isOnGround()));
        }
    }
}
